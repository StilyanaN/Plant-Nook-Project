<!DOCTYPE html>
<html lang="en">
  <head><link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'> </head>
  <body>
    <div class="wrapper">
      <form [formGroup]="formRegister" (ngSubmit)="register()">
        <h1>Register</h1>
        <div class="input-box">
          <input
            type="text"
            placeholder="Username"
            name="username"
            id="username"
            formControlName="username"
          />
          <i class="bx bxs-user"></i>
        </div>
        <ng-container *ngIf="formRegister.get('username')?.touched">
          <p class="error" *ngIf="formRegister.get('username')?.errors?.['required']">
            Username is required!
          </p>
          <p class="error-pass" *ngIf="formRegister.get('username')?.errors?.['minlength']">
            Username must be at least 3 characters!
          </p>
        </ng-container>
        <div class="input-box">
          <input
            type="email"
            placeholder="Email"
            name="email"
            id="email"
            formControlName="email"
          />
          <i class='bx bx-envelope'></i>
        </div>
        <ng-container *ngIf="formRegister.get('email')?.touched">
          <p class="error" *ngIf="formRegister.get('email')?.errors?.['required']">
            Email is required!
          </p>
          <p
            class="error"
            *ngIf="formRegister.get('email')?.errors?.['emailValidator']"
          >
            Email is not valid!
          </p>
        </ng-container>

        <ng-container formGroupName="passGroup">
        <div class="input-box">
          <input
            type="password"
            placeholder="Password"
            name="password"
            id="password"
            formControlName="password"
          />
          <i class="bx bxs-lock-alt"></i>
        </div>
        <ng-container *ngIf="passGroup?.get('password')?.touched">
          <p
            class="error-pass"
            *ngIf="passGroup?.get('password')?.errors?.['required']"
          >
            Password is required!
          </p>
          <p
            class="error-pass"
            *ngIf="passGroup?.get('password')?.errors?.['minlength']"
          >
            'Password should be at least 5 characters!'
          </p>
        </ng-container>

        <div class="input-box">
          <input
            type="password"
            placeholder="Repeat Password"
            name="rePassword"
            id="rePassword"
            formControlName="rePassword"
          />
          <i class="bx bxs-lock-alt"></i>
        </div>
        <ng-container *ngIf="passGroup?.get('rePassword')?.touched">
          <p
            class="error-pass1"
            *ngIf="passGroup?.errors?.['matchPassValidator'] || 
            passGroup?.get('rePassword')?.errors?.['required']"
          >
            Passwords do not match!
          </p>
        </ng-container>
      </ng-container>
        <button class="btn" type="submit"
         [disabled]="formRegister.invalid"
        [style]="{ backgroundColor: formRegister.invalid ? 'grey' : '#266d20b2' }">Register
      </button>
        <div class="register-link">
          <p>Have an account? <a routerLink="/login">Login</a></p>
        </div>
      </form>
    </div>
  </body>
</html>
